let originalSeconds,seconds,timerId,startBox=document.querySelector(".start-box"),inputCounter=startBox.querySelector("#input-counter"),startCounter=startBox.querySelector("#start-counter"),timerCircle=document.querySelector(".c100"),timerNum=document.querySelector(".c100 > span"),lastPercent="p100";startCounter.addEventListener("click",(function(e){if(seconds=parseInt(inputCounter.value),isNaN(seconds))return toggletErrorMessage({show:!0,message:"زمان را به درستی وارد کنید"});toggletErrorMessage({show:!1}),toggleStartBox({show:!1}),toggleLoadingMessage({show:!0}),toggleTimer({show:!0,seconds:seconds}),originalSeconds=seconds,timerId=setInterval(startTimer,1e3)}));let startTimer=()=>{if(lastPercent&&timerCircle.classList.remove(lastPercent),seconds<=0)return clearInterval(timerId),toggleStartBox({show:!0}),toggleTimer({show:!1}),void toggleLoadingMessage({show:!1});seconds-=1,timerNum.textContent=seconds;let e=lastPercent="p"+Math.abs(Math.floor((originalSeconds-seconds)/originalSeconds*100-100));timerCircle.classList.add(e)},toggletErrorMessage=({show:e,message:t})=>{let s=document.querySelector("#error-message");e?(s.textContent=t,s.classList.add("active")):s.classList.remove("active")},toggleStartBox=({show:e})=>{e?(startBox.classList.add("active"),inputCounter.value=""):startBox.classList.remove("active")},toggleTimer=({show:e,seconds:t})=>{e?(timerCircle.style.display="block",timerNum.textContent=t):timerCircle.style.display="none"},toggleLoadingMessage=({show:e})=>{let t=document.querySelector(".message .loading"),s=document.querySelector(".message .success");e?(t.style.display="block",s.style.display="none"):(t.style.display="none",s.style.display="block")};
